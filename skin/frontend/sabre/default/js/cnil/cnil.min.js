!function(global,undefined){"use strict";var factory=function(window){if("object"!=typeof window.document)throw new Error("Cookies.js requires a `window` with a `document` object");var Cookies=function(key,value,options){return 1===arguments.length?Cookies.get(key):Cookies.set(key,value,options)};return Cookies._document=window.document,Cookies._cacheKeyPrefix="cookey.",Cookies._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),Cookies.defaults={path:"/",secure:!1},Cookies.get=function(key){return Cookies._cachedDocumentCookie!==Cookies._document.cookie&&Cookies._renewCache(),Cookies._cache[Cookies._cacheKeyPrefix+key]},Cookies.set=function(key,value,options){return options=Cookies._getExtendedOptions(options),options.expires=Cookies._getExpiresDate(value===undefined?-1:options.expires),Cookies._document.cookie=Cookies._generateCookieString(key,value,options),Cookies},Cookies.expire=function(key,options){return Cookies.set(key,undefined,options)},Cookies._getExtendedOptions=function(options){return{path:options&&options.path||Cookies.defaults.path,domain:options&&options.domain||Cookies.defaults.domain,expires:options&&options.expires||Cookies.defaults.expires,secure:options&&options.secure!==undefined?options.secure:Cookies.defaults.secure}},Cookies._isValidDate=function(date){return"[object Date]"===Object.prototype.toString.call(date)&&!isNaN(date.getTime())},Cookies._getExpiresDate=function(expires,now){if(now=now||new Date,"number"==typeof expires?expires=expires===1/0?Cookies._maxExpireDate:new Date(now.getTime()+1e3*expires):"string"==typeof expires&&(expires=new Date(expires)),expires&&!Cookies._isValidDate(expires))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return expires},Cookies._generateCookieString=function(key,value,options){key=key.replace(/[^#$&+\^`|]/g,encodeURIComponent),key=key.replace(/\(/g,"%28").replace(/\)/g,"%29"),value=(value+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),options=options||{};var cookieString=key+"="+value;return cookieString+=options.path?";path="+options.path:"",cookieString+=options.domain?";domain="+options.domain:"",cookieString+=options.expires?";expires="+options.expires.toUTCString():"",cookieString+=options.secure?";secure":""},Cookies._getCacheFromString=function(documentCookie){for(var cookieCache={},cookiesArray=documentCookie?documentCookie.split("; "):[],i=0;i<cookiesArray.length;i++){var cookieKvp=Cookies._getKeyValuePairFromCookieString(cookiesArray[i]);cookieCache[Cookies._cacheKeyPrefix+cookieKvp.key]===undefined&&(cookieCache[Cookies._cacheKeyPrefix+cookieKvp.key]=cookieKvp.value)}return cookieCache},Cookies._getKeyValuePairFromCookieString=function(cookieString){var separatorIndex=cookieString.indexOf("=");return separatorIndex=0>separatorIndex?cookieString.length:separatorIndex,{key:decodeURIComponent(cookieString.substr(0,separatorIndex)),value:decodeURIComponent(cookieString.substr(separatorIndex+1))}},Cookies._renewCache=function(){Cookies._cache=Cookies._getCacheFromString(Cookies._document.cookie),Cookies._cachedDocumentCookie=Cookies._document.cookie},Cookies._areEnabled=function(){var testKey="cookies.js",areEnabled="1"===Cookies.set(testKey,1).get(testKey);return Cookies.expire(testKey),areEnabled},Cookies.enabled=Cookies._areEnabled(),Cookies},cookiesExport="object"==typeof global.document?factory(global):factory;"function"==typeof define&&define.amd?define(function(){return cookiesExport}):"object"==typeof exports?("object"==typeof module&&"object"==typeof module.exports&&(exports=module.exports=cookiesExport),exports.Cookies=cookiesExport):global.Cookies=cookiesExport}("undefined"==typeof window?this:window),aYaline=window.aYaline||{},aYaline.cnil=window.aYaline.cnil||{},function(namespace,document){"use strict";var templates,options,bodyElem,containerElem,closeElem,EXPIRES,CONSENT_COOKIE_NAME,uaFunctions,_init,_insertConsent,_agreeConsent,_helpers;EXPIRES=31104e3,CONSENT_COOKIE_NAME="cnil-consent",templates={close:"X",content:""},options={uaAccount:""},uaFunctions={init:function(event){event.detail.uaAccount&&Cookies.get("ga-disable-"+event.detail.uaAccount)&&(window["ga-disable-"+event.detail.uaAccount]=!0),_helpers.addEvent(document,"cnilEnableTracking",uaFunctions.enable),_helpers.addEvent(document,"cnilDisableTracking",uaFunctions.disable)},enable:function(event){event.detail.uaAccount&&(Cookies.expire("ga-disable-"+event.detail.uaAccount),delete window["ga-disable-"+event.detail.uaAccount])},disable:function(event){if(event.detail.uaAccount){var uaCookieNames=["__utma","__utmb","__utmc","__utmt","__utmv","__utmz","_ga","_gat"],expireOptions={domain:"."+window.location.hostname.split(".").slice(-2).join(".")};Cookies.set("ga-disable-"+event.detail.uaAccount,!0,{expires:EXPIRES}),window["ga-disable-"+event.detail.uaAccount]=!0;for(var i=0,l=uaCookieNames.length;l>i;i++)Cookies.expire(uaCookieNames[i],expireOptions)}}},bodyElem=document.getElementsByTagName("body")[0],containerElem=document.createElement("div"),closeElem=document.createElement("div"),containerElem.setAttribute("id","cnil"),closeElem.setAttribute("id","cnil-close"),closeElem.setAttribute("class","close"),_helpers={addEvent:function(elem,eventType,callback){elem.addEventListener?elem.addEventListener(eventType,callback,!1):elem.attachEvent&&(eventType="DOMContentLoaded"==eventType?eventType:"on"+eventType,elem.attachEvent(eventType,callback))},createEvent:function(elem,eventName){var _evt;elem.createEvent?(_evt=new CustomEvent(eventName,{detail:options}),elem.dispatchEvent(_evt)):elem.createEventObject&&(eventName="DOMContentLoaded"==eventName?eventName:"on"+eventName,_evt=elem.createEventObject(),_evt.detail=options,elem.fireEvent(eventName,_evt))},simpleMerge:function(target,obj){for(var idx in obj)if(obj.hasOwnProperty(idx)){if("object"==typeof obj[idx]){target[idx]=_helpers.simpleMerge(target[idx],obj[idx]);continue}target[idx]=obj[idx]}return target}},_insertConsent=function(){closeElem.innerHTML=templates.close,containerElem.innerHTML=templates.content,containerElem.insertBefore(closeElem,containerElem.firstElementChild),bodyElem.insertBefore(containerElem,bodyElem.firstElementChild),_helpers.addEvent(closeElem,"click",_agreeConsent)},_agreeConsent=function(event){event.preventDefault(),containerElem.parentNode.removeChild(containerElem),Cookies.set(CONSENT_COOKIE_NAME,!0,{expires:EXPIRES})},_init=function(tpl,opts){"string"==typeof tpl?templates.content=tpl:templates=_helpers.simpleMerge(templates,tpl||{}),options=_helpers.simpleMerge(options,opts||{}),_helpers.addEvent(document,"cnilInit",uaFunctions.init),_helpers.createEvent(document,"cnilInit"),Cookies.get(CONSENT_COOKIE_NAME)||_insertConsent()},namespace.init=_init,namespace.enableTracking=function(){_helpers.createEvent(document,"cnilEnableTracking")},namespace.disableTracking=function(){_helpers.createEvent(document,"cnilDisableTracking")}}(aYaline.cnil,document);
//# sourceMappingURL=./cnil.min.js.map